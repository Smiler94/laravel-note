### 查询构造器

#### DB Facade的基本使用

DB Facade 用于查询构造链和简单的原始查询语句

```
// 基本语句
DB::statement('drop table users');

// 原始查询和参数绑定
DB::select('select * from contacts where validated = ?', [true]);

// 流畅构造器
$user = DB::table('users')->get();

// join和其他调用
DB::table('users')->join('contacts', function ($join) {
    $join->on('users.id', '=', 'contacts.user_id')
            ->where('contacts.type', 'donor');
})
```

#### 原始 SQL 语句

可以使用 DB Facade 以及 statement() 方法来实现任何原始调用，但对不同的操作有一些特定的方法

- select() 返回查询结果集
- insert() 返回自增长的id
- update() 返回受影响的行数
- delete() 返回受影响的行数

##### 原始查询

DB 的特殊方法中最简单的就是 `select()`，不用添加任何参数就可以运行

```
$passwords = DB::select('select * from password');
```

会返回一个 stdClass 对象的集合

##### 参数和命名绑定

Laravel 的数据库结构允许使用 PDO 参数绑定，它可以保护查询不受潜在的 SQL 攻击。

```
// 使用 ?
$password = DB::select('select * from password where type =?', [$type]);

// 使用 :arg
$password = DB::select('select * from password where type = :type', ['type' => $type]);
```